<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="color-scheme" content="dark" />
  <title>Infograf√≠a Pro ‚Äî IA Tradicional vs Generativa vs Agentiva</title>
  <style>
    /* ========= Design System ========= */
    :root{
      --bg0:#060914;
      --bg1:#0a1026;
      --card: rgba(18, 26, 51, .72);
      --card2: rgba(10, 15, 35, .42);
      --line: rgba(120, 140, 255, .22);
      --line2: rgba(120, 140, 255, .35);
      --text:#eef3ff;
      --muted:#c7d2ff;
      --muted2:#aebcff;
      --good:#7CFFB2;   /* Tradicional */
      --warn:#FFD27C;   /* Generativa */
      --cool:#9FB0FF;   /* Agentiva */
      --bad:#FF7C9C;    /* Riesgo */
      --shadow: 0 18px 50px rgba(0,0,0,.38);
      --radius: 22px;
      --radius2: 16px;
      --pad: 18px;
      --pad2: 14px;
      --max: 1160px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
      --sans: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: var(--sans);
      color: var(--text);
      background:
        radial-gradient(1100px 520px at 14% 8%, rgba(40, 105, 255, .28) 0%, transparent 58%),
        radial-gradient(900px 520px at 82% 14%, rgba(205, 70, 255, .20) 0%, transparent 62%),
        radial-gradient(950px 520px at 55% 82%, rgba(124, 255, 178, .10) 0%, transparent 65%),
        linear-gradient(180deg, var(--bg0) 0%, var(--bg1) 100%);
      overflow-x:hidden;
    }

    a{color:#b9c6ff}
    .wrap{max-width:var(--max); margin:0 auto; padding: 24px 18px 70px;}

    /* ========= Helpers ========= */
    .glass{
      background: linear-gradient(180deg, rgba(18,26,51,.82), rgba(10,15,35,.52));
      border: 1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      position: relative;
      overflow: hidden;
    }
    .glass::before{
      content:"";
      position:absolute; inset:-120px;
      background: conic-gradient(from 220deg,
        rgba(124,255,178,.12),
        rgba(159,176,255,.10),
        rgba(255,210,124,.09),
        rgba(255,124,156,.09),
        rgba(124,255,178,.12)
      );
      filter: blur(26px);
      opacity:.65;
      pointer-events:none;
    }
    .glass > *{position:relative}

    .muted{color:var(--muted)}
    .muted2{color:var(--muted2)}
    .mono{font-family:var(--mono)}
    .small{font-size:12px}
    .tiny{font-size:11px}

    .row{display:flex; gap:14px; flex-wrap:wrap}
    .grid{display:grid; gap:14px}
    @media(min-width: 900px){
      .grid.cols3{grid-template-columns:repeat(3,1fr)}
      .grid.cols2{grid-template-columns: 1.25fr .75fr}
      .grid.cols2eq{grid-template-columns: 1fr 1fr}
      .grid.cols4{grid-template-columns:repeat(4,1fr)}
    }

    .pill{
      display:inline-flex; align-items:center; gap:8px;
      padding:7px 11px;
      border:1px solid var(--line);
      background: rgba(10,15,35,.35);
      border-radius:999px;
      font-size:12px;
      color:#dbe4ff;
      white-space:nowrap;
    }
    .dot{width:9px; height:9px; border-radius:999px; display:inline-block}

    .btn{
      appearance:none;
      border:1px solid var(--line2);
      background: rgba(10,15,35,.45);
      color: var(--text);
      padding: 10px 12px;
      border-radius: 14px;
      cursor:pointer;
      transition: transform .12s ease, filter .12s ease, border-color .12s ease;
    }
    .btn:hover{filter:brightness(1.08); transform: translateY(-1px)}
    .btn:active{transform: translateY(0px)}
    .btn.primary{border-color: rgba(124,255,178,.45)}
    .btn.warn{border-color: rgba(255,210,124,.48)}
    .btn.cool{border-color: rgba(159,176,255,.55)}

    input[type="range"]{width:200px}
    input, select{
      width:100%;
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px solid var(--line2);
      background: rgba(10,15,35,.38);
      color: var(--text);
      outline:none;
    }

    /* ========= Topbar / Hero ========= */
    .topbar{
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      padding: 12px 14px;
      border-radius: 18px;
      border:1px solid var(--line);
      background: rgba(10,15,35,.35);
    }
    .topbar .left{
      display:flex; align-items:center; gap:10px; flex-wrap:wrap;
    }
    .badge{
      display:inline-flex; align-items:center; gap:8px;
      padding: 6px 10px;
      border:1px solid var(--line);
      border-radius:999px;
      background: rgba(18,26,51,.50);
      font-size:12px;
      color: var(--muted);
    }

    .hero{
      margin-top:14px;
      padding: 22px 18px;
    }
    .hero h1{
      margin:10px 0 6px;
      font-size: clamp(26px, 4vw, 40px);
      letter-spacing:.2px;
      line-height: 1.08;
    }
    .hero p{
      margin: 0;
      max-width: 980px;
      color: #cfd9ff;
      font-size: 14px;
    }
    .hero .kpiRow{
      margin-top: 16px;
      display:grid;
      gap: 10px;
    }
    @media(min-width:900px){
      .hero .kpiRow{grid-template-columns: repeat(3,1fr)}
    }
    .kpi{
      border:1px solid rgba(120,140,255,.18);
      background: rgba(10,15,35,.25);
      border-radius: 18px;
      padding: 12px 12px;
    }
    .kpi b{display:block; font-size:13px}
    .kpi span{display:block; margin-top:2px; font-size:12px; color:#c7d2ff}

    /* ========= Cards ========= */
    .card{
      padding: var(--pad);
    }
    .card h2{
      margin:0 0 10px;
      font-size: 18px;
      display:flex; align-items:center; gap:10px;
    }
    .card h3{
      margin:0 0 10px;
      font-size: 14px;
      color:#dbe4ff;
    }
    .sub{
      margin-top:-6px;
      color:#c7d2ff;
      font-size: 13px;
    }
    .list{
      margin:10px 0 0;
      padding-left: 18px;
      color:#e2e9ff;
      font-size: 13px;
    }
    .list li{margin:6px 0}
    .tag{
      font-weight: 800;
      letter-spacing: .2px;
      font-size: 12px;
      padding: 7px 10px;
      border-radius: 999px;
      border:1px solid var(--line2);
      background: rgba(10,15,35,.30);
      display:inline-flex; align-items:center; gap:8px;
    }
    .tag.trad{color: var(--good); border-color: rgba(124,255,178,.40)}
    .tag.gen{color: var(--warn); border-color: rgba(255,210,124,.45)}
    .tag.ag{color: var(--cool); border-color: rgba(159,176,255,.50)}

    .twoCol{display:grid; gap:12px}
    @media(min-width:900px){ .twoCol{grid-template-columns:1fr 1fr} }

    .hr{
      height:1px;
      background: linear-gradient(90deg, transparent, rgba(120,140,255,.35), transparent);
      margin: 14px 0;
    }

    /* ========= Comparison Table ========= */
    table{
      width:100%;
      border-collapse:separate;
      border-spacing:0;
      overflow:hidden;
      border-radius: 18px;
      border:1px solid var(--line);
      margin-top: 10px;
    }
    th, td{
      padding: 10px 10px;
      text-align:left;
      vertical-align: top;
      font-size: 13px;
      border-bottom:1px solid rgba(120,140,255,.16);
    }
    th{
      color:#d3dcff;
      background: rgba(10,15,35,.38);
      font-weight:700;
    }
    tr:last-child td{border-bottom:0}

    /* ========= Sims ========= */
    .simGrid{display:grid; gap:14px; margin-top: 10px}
    @media(min-width:900px){ .simGrid{grid-template-columns:repeat(3,1fr)} }
    canvas{
      width:100%;
      height: 190px;
      border-radius: 16px;
      border:1px solid var(--line);
      background: rgba(10,15,35,.35);
    }
    .panel{
      border:1px solid rgba(120,140,255,.18);
      background: rgba(10,15,35,.22);
      border-radius: 18px;
      padding: 12px;
    }
    .panel .lbl{
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      margin-bottom: 8px;
    }
    .hint{
      margin-top:8px;
      color:#c7d2ff;
      font-size: 12px;
    }
    .out{
      margin-top:8px;
      padding:10px 12px;
      border-radius: 14px;
      border:1px solid rgba(120,140,255,.20);
      background: rgba(10,15,35,.22);
      min-height: 90px;
      white-space: pre-wrap;
      font-size: 13px;
      color:#e7eeff;
    }

    /* ========= Footer ========= */
    .footer{
      margin-top: 14px;
      padding: 14px 16px;
      border: 1px solid var(--line);
      border-radius: 18px;
      background: rgba(10,15,35,.35);
      color:#b8c6ff;
      font-size: 12px;
    }

    /* ========= Motion ========= */
    @media (prefers-reduced-motion: no-preference){
      .floatIn{animation: floatIn .6s ease both}
      .floatIn2{animation: floatIn .75s ease both}
      .floatIn3{animation: floatIn .9s ease both}
      @keyframes floatIn{
        from{transform: translateY(10px); opacity:0}
        to{transform: translateY(0); opacity:1}
      }
    }

    /* ========= Print ========= */
    @media print{
      body{background:#fff; color:#000}
      .glass, .topbar, .footer{box-shadow:none}
      .glass::before{display:none}
      .btn, input, select, canvas{display:none !important}
      a{color:#000; text-decoration:underline}
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="topbar floatIn">
      <div class="left">
        <span class="badge">üìå Actividad: Tipos de IA ‚Ä¢ Infograf√≠a HTML + GitHub Pages</span>
        <span class="pill"><span class="dot" style="background:var(--good)"></span>Tradicional</span>
        <span class="pill"><span class="dot" style="background:var(--warn)"></span>Generativa</span>
        <span class="pill"><span class="dot" style="background:var(--cool)"></span>Agentiva</span>
      </div>
      <div class="right">
        <span class="badge">Entrega: <span class="mono">URI</span> (enlace GitHub Pages)</span>
      </div>
    </div>

    <section class="glass hero floatIn2">
      <div style="display:flex; gap:14px; flex-wrap:wrap; align-items:flex-end; justify-content:space-between">
        <div style="min-width:280px; flex:1">
          <h1>IA Tradicional vs IA Generativa vs IA Agentiva</h1>
          <p>
            Resumen visual con <b>definiciones</b>, <b>diferencias</b>, <b>modelos</b>, <b>casos de uso</b> y <b>m√©tricas</b>.
            Incluye simulaciones simples para explicar <span class="mono">overfitting</span>, ‚Äúgeneraci√≥n‚Äù y el bucle ag√©ntico.
          </p>
        </div>
        <div style="min-width:260px">
          <div class="pill" title="Concepto clave del docente">
            üß† ‚ÄúMemoria en blanco‚Äù ‚Üí contextualizar el problema para generar ideas
          </div>
          <div style="height:10px"></div>
          <div class="pill">
            üìà M√©tricas ‚Üí detectan <span class="mono">underfitting</span> / <span class="mono">overfitting</span>
          </div>
        </div>
      </div>

      <div class="kpiRow">
        <div class="kpi">
          <b>IA Tradicional</b>
          <span>Predice/clasifica/agrupa con datos estructurados. Evaluaci√≥n: F1, AUC, RMSE, R¬≤.</span>
        </div>
        <div class="kpi">
          <b>IA Generativa</b>
          <span>Genera contenido nuevo (texto/imagen/c√≥digo). Evaluaci√≥n: calidad + seguridad + consistencia.</span>
        </div>
        <div class="kpi">
          <b>IA Agentiva</b>
          <span>Resuelve tareas multi-paso: planifica ‚Üí usa herramientas ‚Üí verifica ‚Üí itera.</span>
        </div>
      </div>
    </section>

    <section class="grid cols3" style="margin-top:14px">
      <!-- Tradicional -->
      <article class="glass card floatIn">
        <h2>
          <span class="tag trad">‚úÖ IA Tradicional</span>
          <span class="muted2">Machine Learning ‚Äúcl√°sico‚Äù</span>
        </h2>
        <div class="sub">Aprende patrones para <b>clasificaci√≥n</b>, <b>regresi√≥n</b>, <b>clustering</b> y <b>reducci√≥n dimensional</b>.</div>
        <div class="hr"></div>
        <div class="twoCol">
          <div class="panel">
            <h3>Modelos representativos</h3>
            <ul class="list">
              <li>Regresi√≥n lineal / log√≠stica</li>
              <li>√Årboles, Random Forest</li>
              <li>SVM / KNN</li>
              <li>Boosting (XGBoost/LightGBM/CatBoost)</li>
              <li>PCA, K-Means, DBSCAN</li>
            </ul>
          </div>
          <div class="panel">
            <h3>M√©tricas (KPIs)</h3>
            <ul class="list">
              <li><b>Clasificaci√≥n:</b> Accuracy, Precision, Recall, F1, AUC</li>
              <li><b>Regresi√≥n:</b> MAE, RMSE, R¬≤</li>
              <li>Validaci√≥n: train/test, CV, curvas de aprendizaje</li>
            </ul>
          </div>
        </div>
        <div class="hr"></div>
        <div class="row">
          <span class="pill">Diabetes (s√≠/no)</span>
          <span class="pill">Predicci√≥n de precios</span>
          <span class="pill">Fraude / anomal√≠as</span>
          <span class="pill">Mantenimiento predictivo</span>
        </div>
      </article>

      <!-- Generativa -->
      <article class="glass card floatIn2">
        <h2>
          <span class="tag gen">‚ú® IA Generativa</span>
          <span class="muted2">Contenido nuevo</span>
        </h2>
        <div class="sub">Genera <b>texto</b>, <b>im√°genes</b>, <b>audio</b> o <b>c√≥digo</b> a partir de patrones aprendidos.</div>
        <div class="hr"></div>
        <div class="twoCol">
          <div class="panel">
            <h3>Modelos representativos</h3>
            <ul class="list">
              <li>Transformers (LLM)</li>
              <li>Diffusion Models (im√°genes)</li>
              <li>GANs / VAEs</li>
              <li>Modelos multimodales</li>
            </ul>
          </div>
          <div class="panel">
            <h3>M√©tricas (referencia)</h3>
            <ul class="list">
              <li>Perplexity (texto, cuando aplica)</li>
              <li>ROUGE/BLEU (tareas espec√≠ficas)</li>
              <li>FID (im√°genes)</li>
              <li>Evaluaci√≥n humana + safety/groundedness</li>
            </ul>
          </div>
        </div>
        <div class="hr"></div>
        <div class="row">
          <span class="pill">Res√∫menes</span>
          <span class="pill">Chatbots</span>
          <span class="pill">Generaci√≥n de im√°genes</span>
          <span class="pill">Generaci√≥n de c√≥digo</span>
        </div>
      </article>

      <!-- Agentiva -->
      <article class="glass card floatIn3">
        <h2>
          <span class="tag ag">üß© IA Agentiva</span>
          <span class="muted2">Ag√©ntica</span>
        </h2>
        <div class="sub">Sistema con <b>meta</b> + <b>estado/memoria</b> + <b>herramientas</b> para actuar y verificar.</div>
        <div class="hr"></div>
        <div class="twoCol">
          <div class="panel">
            <h3>Arquitectura t√≠pica</h3>
            <ul class="list">
              <li>Planner (plan)</li>
              <li>Tool-use (acciones)</li>
              <li>RAG (b√∫squeda / evidencia)</li>
              <li>Verifier (verificaci√≥n)</li>
            </ul>
          </div>
          <div class="panel">
            <h3>M√©tricas (operativas)</h3>
            <ul class="list">
              <li>Task success (√©xito de tarea)</li>
              <li>Tasa de error / alucinaci√≥n</li>
              <li>Tiempo y costo por tarea</li>
              <li>Seguridad (acciones permitidas)</li>
            </ul>
          </div>
        </div>
        <div class="hr"></div>
        <div class="row">
          <span class="pill">Automatizar tickets</span>
          <span class="pill">An√°lisis de documentos</span>
          <span class="pill">Orquestar APIs</span>
          <span class="pill">Workflows multi-paso</span>
        </div>
      </article>
    </section>

    <section class="glass card" style="margin-top:14px">
      <h2>Comparaci√≥n directa</h2>
      <div class="sub">Diferencias clave por objetivo, datos, evaluaci√≥n y riesgos.</div>

      <table>
        <thead>
          <tr>
            <th>Aspecto</th>
            <th>Tradicional</th>
            <th>Generativa</th>
            <th>Agentiva</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><b>Objetivo</b></td>
            <td>Predecir/clasificar/agrupaci√≥n</td>
            <td>Generar contenido</td>
            <td>Resolver tareas con acciones</td>
          </tr>
          <tr>
            <td><b>Entrada t√≠pica</b></td>
            <td>Datos tabulares, sensores, KPIs</td>
            <td>Texto/imagen/audio/c√≥digo</td>
            <td>Contexto + herramientas + estado</td>
          </tr>
          <tr>
            <td><b>Salida t√≠pica</b></td>
            <td>Clase / valor / cl√∫ster</td>
            <td>Texto, imagen, c√≥digo</td>
            <td>Plan + llamadas a herramientas</td>
          </tr>
          <tr>
            <td><b>Evaluaci√≥n</b></td>
            <td>F1/AUC, RMSE/R¬≤</td>
            <td>Calidad + seguridad + consistencia</td>
            <td>√âxito, costo, confiabilidad</td>
          </tr>
          <tr>
            <td><b>Riesgos</b></td>
            <td><span style="color:var(--bad);font-weight:700">under/overfitting</span></td>
            <td><span style="color:var(--bad);font-weight:700">alucinaci√≥n / sesgo</span></td>
            <td><span style="color:var(--bad);font-weight:700">acciones err√≥neas / loops</span></td>
          </tr>
        </tbody>
      </table>

      <div class="hint">
        Nota: <b>Agentiva</b> suele usar un modelo <b>Generativo</b> ‚Äúpor dentro‚Äù, pero a√±ade <b>planificaci√≥n</b>, <b>herramientas</b> y <b>verificaci√≥n</b>.
      </div>
    </section>

    <!-- ====== SIMULACIONES (con tu parte mejorada 2 y 3) ====== -->
    <section class="glass card" style="margin-top:14px">
      <h2>Simulaciones (mini-demos)</h2>
      <div class="sub">Sirven para explicar los conceptos en exposici√≥n sin depender de software externo.</div>

      <div class="simGrid">
        <!-- Sim 1: Under/Overfitting -->
        <div class="panel">
          <div class="lbl">
            <div>
              <b>1) Underfitting vs Overfitting</b>
              <div class="tiny muted">Tradicional ‚Ä¢ complejidad del modelo</div>
            </div>
            <span class="pill"><span class="dot" style="background:var(--good)"></span>ML</span>
          </div>
          <canvas id="cvFit" width="520" height="280" aria-label="Gr√°fico de ajuste"></canvas>
          <div class="row" style="margin-top:10px; align-items:center">
            <span class="small muted">Complejidad</span>
            <input id="rngFit" type="range" min="1" max="12" value="4" />
            <span id="lblFit" class="small muted2"></span>
            <button class="btn primary" id="btnNew">Nuevo dataset</button>
          </div>
          <div class="hint">Baja complejidad ‚Üí underfitting ‚Ä¢ Excesiva ‚Üí overfitting (no generaliza).</div>
        </div>

        <!-- ====== 2) Generativa (toy) ‚Äî MEJORADO ====== -->
        <div class="panel">
          <div class="lbl">
            <div>
              <b>2) IA Generativa (demo simple)</b>
              <div class="tiny muted">Genera una propuesta en texto a partir de un contexto (no predice una clase ni un n√∫mero).</div>
            </div>
            <span class="pill"><span class="dot" style="background:var(--warn)"></span>GEN</span>
          </div>

          <div class="small muted">Contexto / Tema (¬øsobre qu√© quieres la idea?)</div>
          <input id="txtPrompt" placeholder="Ej: Hospedaje Plaza, Supermall, Calzados Maju, segmentaci√≥n de clientes..." />

          <div style="height:10px"></div>
          <button class="btn warn" id="btnGen">Generar propuesta</button>

          <div id="outGen" class="out"></div>

          <div class="hint">
            ‚úÖ √ötil para ‚Äúmemoria en blanco‚Äù: te sugiere ideas r√°pido. <br/>
            ‚ö†Ô∏è Demo: la salida es una propuesta textual (no es un LLM real).
          </div>
        </div>

        <!-- ====== 3) Bucle Agentivo ‚Äî MEJORADO ====== -->
        <div class="panel">
          <div class="lbl">
            <div>
              <b>3) IA Agentiva (bucle de trabajo)</b>
              <div class="tiny muted">Un agente no solo responde: planifica, act√∫a con herramientas y verifica antes de cerrar.</div>
            </div>
            <span class="pill"><span class="dot" style="background:var(--cool)"></span>AGENT</span>
          </div>

          <div class="small muted">Selecciona una tarea</div>
          <select id="selTask">
            <option value="soporte">Resolver ticket de soporte (diagn√≥stico)</option>
            <option value="marketing">Segmentaci√≥n de clientes + campa√±a</option>
            <option value="docs">Resumen de documento + acciones</option>
          </select>

          <div style="height:10px"></div>
          <button class="btn cool" id="btnAgent">Ejecutar agente</button>

          <div id="logAgent" class="out"></div>

          <div class="hint">
            Idea clave: <b>PLAN ‚Üí ACT√öA ‚Üí VERIFICA ‚Üí ITERA</b> hasta cumplir el criterio de √©xito.
          </div>
        </div>
      </div>
    </section>

    <section class="glass card" style="margin-top:14px">
      <h2>Casos de uso listos para exponer</h2>
      <div class="grid cols2eq" style="margin-top:10px">
        <div class="panel">
          <h3>IA Tradicional</h3>
          <ul class="list">
            <li><b>Clasificaci√≥n:</b> diabetes s√≠/no, churn, fraude.</li>
            <li><b>Regresi√≥n:</b> precios, demanda, tiempos de entrega.</li>
            <li><b>No supervisado:</b> clustering de clientes, PCA para reducir variables.</li>
          </ul>
        </div>
        <div class="panel">
          <h3>Generativa y Agentiva</h3>
          <ul class="list">
            <li><b>Generativa:</b> redactar, resumir, generar im√°genes/c√≥digo.</li>
            <li><b>Agentiva:</b> automatizar flujos (tickets, reportes, an√°lisis de docs) con herramientas.</li>
            <li><b>Clave:</b> agentiva = generativa + herramientas + verificaci√≥n.</li>
          </ul>
        </div>
      </div>
    </section>

    <div class="footer">
      <b>Publicaci√≥n en GitHub Pages (r√°pido):</b>
      1) Crear repo 2) Subir este <span class="mono">index.html</span> (ra√≠z)
      3) Settings ‚Üí Pages ‚Üí Deploy from branch (main / root)
      4) Copiar URL tipo <span class="mono">https://usuario.github.io/repo/</span> y enviarla como <b>URI</b> al aula virtual.
    </div>
  </div>

  <script>
    /* ========= Sim 1: Under/Overfitting (toy polynomial fit) ========= */
    const cvFit = document.getElementById("cvFit");
    const ctx = cvFit.getContext("2d");
    const rngFit = document.getElementById("rngFit");
    const lblFit = document.getElementById("lblFit");
    const btnNew = document.getElementById("btnNew");

    let pts = [];

    function randn(){
      let u=0,v=0;
      while(u===0) u=Math.random();
      while(v===0) v=Math.random();
      return Math.sqrt(-2*Math.log(u))*Math.cos(2*Math.PI*v);
    }

    function makeData(){
      pts = [];
      for(let i=0;i<30;i++){
        const x = -1 + 2*Math.random();
        const yTrue = 0.20 + 0.95*x + 0.85*x*x - 0.62*x*x*x; // curva real
        const y = yTrue + 0.18*randn(); // ruido
        pts.push({x,y});
      }
    }

    function polyFit(deg){
      // Ridge-like normal equations (demo)
      const n = pts.length, m = deg+1;
      const X = [], Y = [];
      for(const p of pts){
        const row = [];
        for(let d=0; d<=deg; d++) row.push(Math.pow(p.x,d));
        X.push(row); Y.push(p.y);
      }
      const A = Array.from({length:m},()=>Array(m).fill(0));
      const b = Array(m).fill(0);
      for(let i=0;i<n;i++){
        for(let r=0;r<m;r++){
          b[r] += X[i][r]*Y[i];
          for(let c=0;c<m;c++) A[r][c] += X[i][r]*X[i][c];
        }
      }
      const lambda = 0.001;
      for(let i=0;i<m;i++) A[i][i]+=lambda;

      // Gaussian elimination
      const M = A.map((row,i)=>row.concat([b[i]]));
      for(let i=0;i<m;i++){
        let p=i;
        for(let r=i+1;r<m;r++) if(Math.abs(M[r][i])>Math.abs(M[p][i])) p=r;
        [M[i],M[p]]=[M[p],M[i]];
        const div = M[i][i] || 1e-9;
        for(let c=i;c<m+1;c++) M[i][c]/=div;
        for(let r=0;r<m;r++){
          if(r===i) continue;
          const factor = M[r][i];
          for(let c=i;c<m+1;c++) M[r][c]-=factor*M[i][c];
        }
      }
      const w = M.map(row=>row[m]);
      return (x)=>{
        let s=0;
        for(let d=0; d<=deg; d++) s += w[d]*Math.pow(x,d);
        return s;
      };
    }

    function drawFit(){
      const deg = Number(rngFit.value);
      lblFit.textContent = `Grado: ${deg}`;
      ctx.clearRect(0,0,cvFit.width,cvFit.height);

      const pad=30, W=cvFit.width, H=cvFit.height;
      function sx(x){ return pad + (x+1)/2*(W-2*pad); }
      function sy(y){ return H-pad - (y+0.85)/2.35*(H-2*pad); }

      // axes
      ctx.strokeStyle="rgba(159,176,255,.35)";
      ctx.lineWidth=1;
      ctx.beginPath();
      ctx.moveTo(pad,H-pad); ctx.lineTo(W-pad,H-pad);
      ctx.moveTo(pad,H-pad); ctx.lineTo(pad,pad);
      ctx.stroke();

      // points
      for(const p of pts){
        ctx.fillStyle="rgba(234,240,255,.92)";
        ctx.beginPath();
        ctx.arc(sx(p.x), sy(p.y), 3.2, 0, Math.PI*2);
        ctx.fill();
      }

      // fit curve
      const f = polyFit(deg);
      ctx.strokeStyle="rgba(124,255,178,.95)";
      ctx.lineWidth=2.2;
      ctx.beginPath();
      for(let i=0;i<=260;i++){
        const x = -1 + 2*i/260;
        const y = f(x);
        if(i===0) ctx.moveTo(sx(x), sy(y));
        else ctx.lineTo(sx(x), sy(y));
      }
      ctx.stroke();

      // label message
      let note;
      if(deg<=2) note="Tendencia: UNDERFITTING (modelo muy simple)";
      else if(deg>=9) note="Tendencia: OVERFITTING (memoriza el ruido)";
      else note="Equilibrio: generaliza mejor (bias/variance balance)";
      ctx.fillStyle="rgba(255,210,124,.95)";
      ctx.font="13px system-ui";
      ctx.fillText(note, pad, 18);
    }

    rngFit.addEventListener("input", drawFit);
    btnNew.addEventListener("click", ()=>{ makeData(); drawFit(); });

    /* ========= Sim 2: Generativa (toy) ‚Äî MEJORADO ========= */
    const btnGen = document.getElementById("btnGen");
    const txtPrompt = document.getElementById("txtPrompt");
    const outGen = document.getElementById("outGen");

    const ideaBank = [
      {
        title:"Predicci√≥n de demanda + reposici√≥n",
        why:"Evita quiebres de stock y reduce sobre-inventario.",
        how:"Modelo de regresi√≥n/forecast (GBM) para demanda semanal + regla de stock m√≠nimo.",
        metrics:["RMSE (error de predicci√≥n)","Nivel de servicio (%)","Rupturas de stock (‚Üì)"],
        deliverable:"Dashboard con predicci√≥n semanal + recomendaci√≥n de compra."
      },
      {
        title:"Segmentaci√≥n de clientes + campa√±a personalizada",
        why:"Aumenta conversi√≥n con mensajes distintos por perfil.",
        how:"Clustering (K-Means/DBSCAN) ‚Üí perfiles (RFM) ‚Üí copies generados por segmento.",
        metrics:["Uplift (A/B)","CTR","Conversi√≥n (%)"],
        deliverable:"Segmentos definidos + campa√±a por segmento + reporte A/B."
      },
      {
        title:"Mantenimiento predictivo",
        why:"Detecta fallas antes de que ocurran y reduce paradas.",
        how:"Clasificaci√≥n supervisada (RF/XGBoost) con sensores/bit√°coras para predecir falla.",
        metrics:["Recall de fallas","F1","Tiempo de inactividad (‚Üì)"],
        deliverable:"Alerta temprana + tabla de riesgo + registro de fallas."
      },
      {
        title:"Agente para tickets de soporte (con base de conocimiento)",
        why:"Resuelve m√°s r√°pido y con evidencia.",
        how:"RAG (b√∫squeda en docs) + pasos de soluci√≥n + verificaci√≥n con logs/capturas.",
        metrics:["Task success","Tiempo promedio de resoluci√≥n","Reapertura de tickets (‚Üì)"],
        deliverable:"Bot de soporte + registro de pasos y evidencia."
      },
      {
        title:"Clasificador de riesgo / scoring",
        why:"Prioriza casos cr√≠ticos y mejora decisiones.",
        how:"Clasificaci√≥n (LogReg/RF) + calibraci√≥n de probabilidades + validaci√≥n.",
        metrics:["AUC","F1","Calibraci√≥n (Brier/curva)"],
        deliverable:"Score por cliente/caso + umbrales de acci√≥n."
      }
    ];

    function bullet(arr){ return arr.map(x=>`‚Ä¢ ${x}`).join("\n"); }

    btnGen.addEventListener("click", ()=>{
      const context = (txtPrompt.value || "").trim();
      const pick = ideaBank[Math.floor(Math.random()*ideaBank.length)];
      const ctxLine = context ? `Tema: ${context}\n\n` : "";
      outGen.textContent =
`${ctxLine}PROPUESTA
‚Ä¢ ${pick.title}

¬øPOR QU√â?
‚Ä¢ ${pick.why}

¬øC√ìMO FUNCIONA?
‚Ä¢ ${pick.how}

M√âTRICAS (KPI)
${bullet(pick.metrics)}

ENTREGABLE
‚Ä¢ ${pick.deliverable}`;
    });

    /* ========= Sim 3: Agent loop ‚Äî MEJORADO ========= */
    const btnAgent = document.getElementById("btnAgent");
    const selTask = document.getElementById("selTask");
    const logAgent = document.getElementById("logAgent");

    function runAgent(task){
      const lines = [];
      lines.push("0) OBJETIVO Y CRITERIO DE √âXITO");
      lines.push("   ‚Ä¢ Definir qu√© significa 'terminado' (KPI o evidencia).");
      lines.push("");
      lines.push("1) PLAN");
      lines.push("   ‚Ä¢ Definir pasos, datos necesarios y herramientas a usar.");
      lines.push("");

      if(task==="soporte"){
        lines.push("2) ACT√öA");
        lines.push("   ‚Ä¢ Pedir informaci√≥n m√≠nima: error exacto, logs, contexto.");
        lines.push("   ‚Ä¢ Probar 2‚Äì3 hip√≥tesis (pruebas r√°pidas).");
        lines.push("");
        lines.push("3) VERIFICA");
        lines.push("   ‚Ä¢ Confirmar soluci√≥n con evidencia (log/captura).");
        lines.push("");
        lines.push("4) ITERA");
        lines.push("   ‚Ä¢ Si falla: ajustar hip√≥tesis y repetir.");
        lines.push("");
        lines.push("5) CIERRE");
        lines.push("   ‚Ä¢ Documentar causa + soluci√≥n + prevenci√≥n.");
      }
      else if(task==="marketing"){
        lines.push("2) ACT√öA");
        lines.push("   ‚Ä¢ Preparar variables (RFM: recencia, frecuencia, monto).");
        lines.push("   ‚Ä¢ Hacer clustering ‚Üí definir perfiles/segmentos.");
        lines.push("   ‚Ä¢ Redactar mensajes por segmento (generativa).");
        lines.push("");
        lines.push("3) VERIFICA");
        lines.push("   ‚Ä¢ Ejecutar A/B test y medir uplift/CTR/conversi√≥n.");
        lines.push("");
        lines.push("4) ITERA");
        lines.push("   ‚Ä¢ Ajustar segmentos o mensajes seg√∫n resultados.");
        lines.push("");
        lines.push("5) CIERRE");
        lines.push("   ‚Ä¢ Campa√±a final + reporte con KPI.");
      }
      else {
        lines.push("2) ACT√öA");
        lines.push("   ‚Ä¢ Buscar secciones clave (b√∫squeda/RAG).");
        lines.push("   ‚Ä¢ Resumir y extraer acciones (qu√©, qui√©n, cu√°ndo).");
        lines.push("");
        lines.push("3) VERIFICA");
        lines.push("   ‚Ä¢ Contrastar con el documento (citas/evidencia).");
        lines.push("");
        lines.push("4) ITERA");
        lines.push("   ‚Ä¢ Refinar resumen si falta informaci√≥n.");
        lines.push("");
        lines.push("5) CIERRE");
        lines.push("   ‚Ä¢ Checklist accionable + riesgos detectados.");
      }

      return lines.join("\n");
    }

    btnAgent.addEventListener("click", ()=>{
      logAgent.textContent = runAgent(selTask.value);
    });

    /* init */
    makeData();
    drawFit();
    outGen.textContent = "Escribe un tema y presiona ‚ÄúGenerar propuesta‚Äù.";
    logAgent.textContent = "Selecciona una tarea y presiona ‚ÄúEjecutar agente‚Äù.";
  </script>
</body>
</html>
